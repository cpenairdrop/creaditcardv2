<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NextGen Cyber Institute — VIP Verification</title>
  <style>
    /* ===========================
       Basic resets & fonts
       =========================== */
    :root{
      --bg-1:#020617;
      --bg-2:#081028;
      --glass-bg: rgba(255,255,255,0.06);
      --glass-border: rgba(255,255,255,0.08);
      --gold-1:#ffd54a;
      --gold-2:#d4af37;
      --accent: rgba(255,213,74,0.12);
      --white-glow: rgba(255,255,255,0.12);
      --glass-blur: 10px;
      --card-radius: 14px;
      --vip-glow: 0 0 18px rgba(212,175,55,0.7);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; color:#fff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    body{
      background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
      min-height: 100vh;
    }

    /* ===========================
       Animated golden waves (SVG mask + CSS animation)
       =========================== */
    .wave-bg{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      mix-blend-mode:screen;
      opacity:0.95;
    }
    /* create moving gradient waves using pseudo elements */
    .wave-bg .wave{
      position:absolute;
      inset:-10% -20%;
      background: radial-gradient(800px 400px at 10% 20%, rgba(255,215,74,0.08), transparent 10%),
                  radial-gradient(700px 300px at 90% 80%, rgba(212,175,55,0.06), transparent 10%);
      transform: translateX(0);
      animation: drift 20s linear infinite;
      filter: blur(30px) saturate(1.3);
    }
    .wave-bg .wave.wave2{
      transform: translateX(-10%);
      opacity:0.7;
      animation-duration: 28s;
      animation-direction: reverse;
      filter: blur(40px) saturate(1.2);
    }
    @keyframes drift {
      0%{transform: translateX(-8%) translateY(0) rotate(-2deg)}
      50%{transform: translateX(8%) translateY(2%) rotate(2deg)}
      100%{transform: translateX(-8%) translateY(0) rotate(-2deg)}
    }

    /* faint watermark text */
    .watermark{
      position:fixed;
      top:12%;
      right:6%;
      transform:rotate(-18deg);
      font-size:64px;
      color: rgba(255,255,255,0.03);
      font-weight:800;
      letter-spacing:6px;
      z-index:0;
      pointer-events:none;
    }

    /* ===========================
       Center container & card
       =========================== */
    .wrap{
      position:relative;
      z-index:2;
      min-height:100dvh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    .card{
      width:100%;
      max-width:980px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:var(--card-radius);
      border:1px solid var(--glass-border);
      padding:22px;
      box-shadow: 0 10px 40px rgba(2,6,23,0.6);
      backdrop-filter: blur(var(--glass-blur));
      position:relative;
      overflow:hidden;
    }

    header.card-header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:12px;
    }
    .logo{
      width:64px;
      height:64px;
      border-radius:12px;
      background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      display:flex; align-items:center; justify-content:center;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }
    .brand{
      font-weight:700;
      font-size:20px;
      line-height:1;
    }
    .brand small{display:block; font-weight:600; font-size:12px; color:rgba(255,255,255,0.6); margin-top:4px}

    .vip-badge{
      margin-left:auto;
      padding:6px 12px;
      border-radius:999px;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      color:#081019;
      font-weight:800;
      box-shadow: var(--vip-glow);
      border:1px solid rgba(255,255,255,0.08);
      letter-spacing:0.6px;
      display:flex;
      align-items:center;
      gap:8px;
      font-size:13px;
    }

    /* ===========================
       Lookup form
       =========================== */
    .lookup{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:18px;
      flex-wrap:wrap;
    }
    .lookup input[type="text"]{
      flex:1 1 320px;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.25);
      color:#fff;
      outline:none;
      font-size:15px;
      box-shadow: inset 0 -1px 0 rgba(255,255,255,0.02);
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:700;
      letter-spacing:0.4px;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      color:#fff;
      border:1px solid rgba(255,255,255,0.06);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:active{ transform: translateY(1px) }

    .btn.primary{
      background: linear-gradient(90deg, rgba(212,175,55,0.85), rgba(255,213,74,0.8));
      color:#081019;
      box-shadow: 0 6px 26px rgba(212,175,55,0.12), 0 1px 0 rgba(255,255,255,0.06) inset;
    }
    .btn.ghost{
      background:transparent;
      border:1px dashed rgba(255,255,255,0.06);
    }

    .small{
      font-size:13px;
      color:rgba(255,255,255,0.7);
    }

    /* ===========================
       Result layout
       =========================== */
    .result{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:18px;
      align-items:start;
    }

    .profile, .invoice{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:16px;
      border:1px solid rgba(255,255,255,0.04);
      min-height:180px;
    }

    .profile h3{
      margin:0 0 8px 0;
      font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    .profile .line{height:1px;background:linear-gradient(90deg, rgba(255,255,255,0.03), transparent); margin:10px 0;}

    .field{
      margin-bottom:8px;
      font-size:14px;
      color:rgba(255,255,255,0.92);
    }
    .field .label{font-weight:700; color:rgba(255,255,255,0.75); display:inline-block; width:120px}
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:13px;
      color:#081019;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      box-shadow: var(--vip-glow);
    }
    .status{
      display:inline-flex; gap:10px; align-items:center; margin-top:6px;
    }
    .status .stat{
      padding:6px 10px; border-radius:8px; font-weight:700; font-size:13px;
    }
    .stat.paid{ background: linear-gradient(90deg,#2ec27e,#1bb06f); color:#02120b }
    .stat.partial{ background: linear-gradient(90deg,#ffb74d,#ff8a4d); color:#1a0b00 }
    .stat.unpaid{ background: linear-gradient(90deg,#ff6b6b,#ff4b4b); color:#1a0303 }

    /* invoice */
    .invoice h4{ margin:0 0 12px 0; font-size:16px; }
    .line-item{
      display:flex; justify-content:space-between; gap:8px; padding:6px 0;
      border-bottom: 1px dashed rgba(255,255,255,0.03);
      font-size:14px;
    }
    .line-item:last-child{ border-bottom:none }
    .totals{ font-weight:800; margin-top:10px; display:flex; justify-content:space-between; font-size:15px }
    .balance{ color:#ff6b6b; font-weight:900; }

    /* actions area */
    .actions{ display:flex; flex-direction:column; gap:8px; margin-top:12px }
    .actions .row{ display:flex; gap:8px; flex-wrap:wrap }

    /* typing area */
    .typing{
      min-height:120px;
      font-family: 'Courier New', monospace;
      font-size:15px;
      line-height:1.6;
      color:rgba(255,255,255,0.95);
      white-space:pre-wrap;
      word-break:break-word;
      overflow:hidden;
    }
    .type-gold{ color:var(--gold-1); font-weight:800; text-shadow: 0 0 8px rgba(212,175,55,0.35) }
    .type-white{ color:#fff; }

    /* modal */
    .modal-backdrop{
      position:fixed; inset:0; background: rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:20;
      backdrop-filter: blur(4px);
    }
    .modal{
      width:calc(100% - 48px);
      max-width:520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      transform: translateY(-10px); opacity:0; transition: all .22s ease;
    }
    .modal.show{ transform: translateY(0); opacity:1; }
    .modal h3{ margin:0 0 8px 0 }
    .modal .modal-actions{ display:flex; gap:8px; margin-top:12px; justify-content:flex-end }
    .close-x{ background:transparent; border:none; color:rgba(255,255,255,0.6); font-weight:700; cursor:pointer; }

    /* disabled button look & prevent clicks */
    .btn[disabled]{
      opacity:0.5;
      cursor:not-allowed;
      pointer-events:none;
      filter:grayscale(20%);
    }

    /* responsive */
    @media (max-width:880px){
      .result{ grid-template-columns: 1fr; }
      .invoice{ order:2 }
    }
  </style>
</head>
<body>
  <div class="wave-bg" aria-hidden="true">
    <div class="wave"></div>
    <div class="wave wave2"></div>
  </div>

  <div class="watermark">NEXTGEN CYBER INSTITUTE</div>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <header class="card-header">
        <div class="countdown-timer" style="text-align: center; margin-bottom: 20px; color: var(--gold-1); font-weight: bold;">
          <div id="countdown" style="font-size: 24px; text-shadow: 0 0 10px rgba(212,175,55,0.5);"></div>
          <div style="font-size: 14px; margin-top: 5px;">Class Starts Today at 9:00 PM</div>
        </div>
        

        <div class="brand" id="title">
          NextGen Cyber Institute
          <small>VIP Student Verification</small>
        </div>

        <div class="vip-badge" title="VIP">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2l2.1 4.5L19 7l-3.5 3 0.8 4.6L12 11.7 7.7 14.6 8.5 10 5 7l4.9-.5L12 2z" fill="#081019"></path></svg>
          VIP
        </div>
      </header>

      <!-- lookup -->
      <section aria-label="lookup" class="lookup" role="search">
        <input id="emailInput" type="email" placeholder="Enter your email address " aria-label="Email address">
        <button id="searchBtn" class="btn primary">Check Registration</button>
        <button id="resetBtn" class="btn ghost" title="Reset view">Reset</button>
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center">
          <div class="small"></div>
        </div>
      </section>

      <!-- results & typing area -->
      <div id="resultWrap" class="result" aria-live="polite">
        <div class="profile" id="profileCard" style="display:none">
          <h3><span id="vipTitle" class="type-gold"></span></h3>
          <div class="typing" id="typingArea" aria-atomic="true" aria-live="polite"></div>

          <div class="line"></div>
        </div>

        <aside class="invoice" id="invoiceCard" style="display:none">
          <h4>Invoice & Payment</h4>
          <div id="itemsList" aria-hidden="true"></div>
            <div class="totals">
              <div class="balance">Outstanding</div>
              <div id="balanceVal" class="balance">$80</div>
            </div>

          <div style="margin-top:12px;">
            <div class="small" hidden>Payment Ref: <span id="paymentRef">-</span></div>
            <div cl
            ass="small" hidden> Batch: <strong id="batchVal">-</strong></div>
            <div style="height:8px"></div>
            <div id="paymentHistoryArea" class="small"></div>
          </div>
        </aside>
        <!-- moved status and actions to the bottom of the card (last page) -->
      </div>

      <div id="footerControls" style="margin-top:18px;">
        <div class="status" id="statusRow" style="display:none">
          <div id="paidStatus" class="stat paid">PAID</div>
          <div id="partialStatus" class="stat partial" style="display:none">PARTIAL</div>
          <div id="unpaidStatus" class="stat unpaid" style="display:none">UNPAID</div>
        </div>

        <div class="actions" id="actionButtons" style="display:none; margin-top:12px;">
          <div class="row">
            <button id="markPaymentBtn" class="btn" disabled hidden>Mark Payment</button>
            <button id="generateLinkBtn" class="btn primary">Generate Class Private Link</button>
            <button id="copyBtn" class="btn">Copy Info</button>
            <button id="printBtn" class="btn">Print Receipt</button>
            <button id="chatBtn" class="btn">Chat Admin</button>
          </div>
          <div class="row" style="margin-top:6px;">
            <button id="exportBtn" class="btn ghost">Export CSV</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>

  <!-- modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal" class="modal" role="document">
      <h3 id="modalTitle"></h3>
      <div id="modalBody" style="color:rgba(255,255,255,0.9); margin-top:8px; font-size:15px"></div>
      <div class="modal-actions">
        <button id="modalClose" class="close-x btn">Close</button>
        <button id="modalCopyLink" class="btn primary" style="display:none">Copy Link</button>
      </div>
    </div>
  </div>

  <script>
    /*******************************
     * NextGen Cyber Institute - Single HTML App
     * All logic here. No server, no DB. localStorage persists.
     *******************************/

    console.log("NGCI VIP verification script starting...");

    // Utilities
    const $ = id => document.getElementById(id);
    const formatEmail = (raw) => {
      if(!raw) return '';
      return raw.trim().toLowerCase();
    };

    // localStorage key
    const LS_KEY = 'ngci_registrations_v1';

    // Preloaded dataset with Sanni
    const PRELOAD = [
      {
        phone: "+2347061934493",
        name: "Sanni Ayorinde Isaac",
        email: "sanniisaac3@gmail.com",
        country: "Nigeria",
        gender: "Male",
        laptop: "Yes",
        os: "Windows",
        interest: "Ethical Hacking",
        batch: "NGCVIP202511GH76",
        source: "tiktok",
        paymentRef: "NGCVIP/2025/714",
        items: [
          { description: "Installation of Kali Linux", price: 45, status: "successful", note: "8:30 pm Sat 20/09" },
          { description: "Installation of Parrot OS", price: 0, status: "successful", note: "9:05 pm Sun 28/09" },
          { description: "VPN Installation", price: 40, status: "successful", note: "10:20 pm Tue 30/09" },
          { description: "VIP Ethical Hacking Class", price: 200, status: "partial", note: "4:27 pm Tue 23/09" },
          { description: "Network Adapter", price: 100, status: "pending", note: "Pending payment" }
        ],
        subtotal: 385,
        payments: [
          { date: "2025-10-15", amount: 255, ref: "VIPCLASS-AX9021" }
        ],
        amountPaid: 255,
        balance: 80,
        batchId: "NGCVIP2025GH76",
        vip: true
      }
    ];

    // load dataset - localStorage disabled for privacy; always use in-memory PRELOAD copy
    function loadData(){
      console.log("LocalStorage usage disabled. Using in-memory PRELOAD dataset.");
      // return a deep copy so runtime edits don't mutate the original constant
      return JSON.parse(JSON.stringify(PRELOAD));
    }

    // saveData is a no-op when persistence is disabled
    function saveData(arr){
      console.log("saveData called but persistence is disabled. Changes will not be saved permanently.", arr);
    }

    let db = loadData();

    // DOM refs
    const emailInput = $('emailInput');
    const searchBtn = $('searchBtn');
    const resetBtn = $('resetBtn');
    const profileCard = $('profileCard');
    const invoiceCard = $('invoiceCard');
    const typingArea = $('typingArea');
    const vipTitle = $('vipTitle');
    const actionButtons = $('actionButtons');
    const itemsList = $('itemsList');
    const subtotalVal = $('subtotalVal');
    const paidVal = $('paidVal');
    const balanceVal = $('balanceVal');
    const paymentRef = $('paymentRef');
    const batchVal = $('batchVal');
    const paymentHistoryArea = $('paymentHistoryArea');
    const statusRow = $('statusRow');
    const paidStatus = $('paidStatus');
    const partialStatus = $('partialStatus');
    const unpaidStatus = $('unpaidStatus');

    const markPaymentBtn = $('markPaymentBtn');
    const generateLinkBtn = $('generateLinkBtn');
    const copyBtn = $('copyBtn');
    const printBtn = $('printBtn');
    const chatBtn = $('chatBtn');
    const exportBtn = $('exportBtn');

    // modal refs
    const modalBackdrop = $('modalBackdrop');
    const modal = $('modal');
    const modalTitle = $('modalTitle');
    const modalBody = $('modalBody');
    const modalClose = $('modalClose');
    const modalCopyLink = $('modalCopyLink');

    // typing config
    const TYPING_SPEED = 18; // ms per char
    const BETWEEN_LINES = 220; // ms between lines

    // small debounce to avoid double lookups
    let debounceTimer = null;

    function simulateLookup(email){
      return new Promise((resolve) => {
        console.log("Simulated lookup started for:", email);
        // show spinner by changing button state
        searchBtn.disabled = true;
        searchBtn.textContent = 'Searching...';
        setTimeout(() => {
          const found = db.find(r => r.email.toLowerCase() === email.toLowerCase());
          searchBtn.disabled = false;
          searchBtn.textContent = 'Check Registration';
          console.log("Lookup result for", email, "->", found ? "FOUND" : "NOT FOUND", found || "");
          resolve(found || null);
        }, 2000); // 2s simulated delay
      });
    }

    // --- Typing line-by-line effect ---
    function typeLines(lines, callback){
      typingArea.innerHTML = '';
      let i = 0;
      (function nextLine(){
        if(i >= lines.length){
          if(callback) callback();
          return;
        }
        const {text, cls} = lines[i];
        const lineEl = document.createElement('div');
        lineEl.className = cls === 'gold' ? 'type-gold' : 'type-white';
        typingArea.appendChild(lineEl);
        let j = 0;
        function step(){
          if(j <= text.length){
            lineEl.textContent = text.slice(0,j);
            j++;
            setTimeout(step, TYPING_SPEED);
          }else{
            i++;
            setTimeout(nextLine, BETWEEN_LINES);
          }
        }
        step();
      })();
    }

    // Format dollars
    const dollar = (n) => '$' + Number(n).toLocaleString(undefined, {maximumFractionDigits:2});

    // render user found
    function renderProfile(user){
      vipTitle.textContent = user.vip ? 'NextGenCyber Institute VIP' : 'NextGen Cyber Institute';
      profileCard.style.display = '';
      invoiceCard.style.display = '';
      actionButtons.style.display = '';
      statusRow.style.display = '';

      // status badges
      paidStatus.style.display = 'none';
      partialStatus.style.display = 'none';
      unpaidStatus.style.display = 'none';
      if(user.balance <= 0){
        paidStatus.style.display = '';
      }else if(user.amountPaid > 0){
        partialStatus.style.display = '';
      }else{
        unpaidStatus.style.display = '';
      }

      // typed lines: VIP title gold then details in white lines with spacing
      const lines = [];
      
      // Personal Information
      lines.push({ text: `──── Personal Information ────`, cls: 'gold' });
      lines.push({ text: `Full Name: ${user.name}`, cls: 'white' });
      lines.push({ text: `Email: ${user.email}`, cls: 'white' });
      lines.push({ text: `WhatsApp: ${user.phone}`, cls: 'white' });
      lines.push({ text: `Gender: ${user.gender}`, cls: 'white' });
      
      // Location
      lines.push({ text: `\n──── Location ────`, cls: 'gold' });
      lines.push({ text: `Country: ${user.country}`, cls: 'white' });
      
      // Technical Setup
      lines.push({ text: `\n──── Technical Setup ────`, cls: 'gold' });
      lines.push({ text: `Laptop Available: ${user.laptop}`, cls: 'white' });
      lines.push({ text: `Operating System: ${user.os}`, cls: 'white' });
      
      // Course Details
      lines.push({ text: `\n──── Course Details ────`, cls: 'gold' });
      lines.push({ text: `Interest Area: ${user.interest}`, cls: 'white' });
      lines.push({ text: `Batch: ${user.batch}`, cls: 'white' });
      lines.push({ text: `Source: ${user.source}`, cls: 'white' });
      lines.push({ text: `Payment Reference: ${user.paymentRef}`, cls: 'white' });

      typeLines(lines, () => {
        console.log("Typing animation complete for", user.phone);
      });

      // invoice
      itemsList.innerHTML = '';
      user.items.forEach(it => {
        const div = document.createElement('div');
        div.className = 'line-item';
        const priceText = it.price === 0 ? 'Free' : `<span style="color: #2ec27e; font-weight: bold;">${dollar(it.price)}</span>`;
        let statusColor, statusText, statusSymbol;
        if (it.status === 'pending') {
          statusColor = '#ff6b6b';
          statusText = ' (Pending)';
          statusSymbol = '⏳';
        } else if (it.status === 'partial') {
          statusColor = 'linear-gradient(90deg,#ffb74d,#ff8a4d)';
          statusText = ' (Partial)';
          statusSymbol = '◔';
        } else { // successful
          statusColor = 'linear-gradient(90deg,#2ec27e,#1bb06f)';
          statusText = ' (Successful)';
          statusSymbol = '✓';
        }
        const statusStyle = `background: ${statusColor}; font-weight: bold; margin-left:8px; padding: 2px 8px; border-radius: 4px; color: ${it.status === 'pending' ? '#fff' : '#000'};`;

        const leftHtml = `<div>${it.description}<span style="${statusStyle}">${statusSymbol}${statusText}</span>` + (it.note ? `<div class="small" style="margin-top:6px;color:rgba(255,255,255,0.75)">${it.note}</div>` : '') + `</div>`;
        div.innerHTML = `${leftHtml}<div>${priceText}</div>`;
        itemsList.appendChild(div);
      });

      subtotalVal.textContent = dollar(user.subtotal);
      paidVal.textContent = dollar(user.amountPaid);
      balanceVal.textContent = dollar(user.balance);
      paymentRef.textContent = user.paymentRef || '-';
      batchVal.textContent = user.batch || '-';

      // history
      if(user.payments && user.payments.length){
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong><br>';
        user.payments.slice().reverse().forEach(p => {
          paymentHistoryArea.innerHTML += `${p.date} — ${dollar(p.amount)} (ref: ${p.ref})<br>`;
        });
      }else{
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong> None';
      }

      // show/hide action buttons based on status (we show all)
      actionButtons.style.display = 'block';
    }

    // render not found
    function renderNotFound(email){
      profileCard.style.display = '';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
      statusRow.style.display = 'none';
      vipTitle.textContent = '';
      typingArea.innerHTML = '';
      typeLines([{text: 'Record Not Found', cls:'white'}, {text: `No registration matches ${email}`, cls:'white'}], () => {});
      console.log("Displayed not found for", email);
    }

    // main search
    async function doSearch(rawEmail){
      const email = formatEmail(rawEmail);
      if(!email){
        alert('Please enter an email address.');
        return;
      }
      const found = await simulateLookup(email);
      if(found){
        renderProfile(found);
      }else{
        renderNotFound(email);
      }
    }

    // event listeners
    searchBtn.addEventListener('click', () => {
      const v = emailInput.value;
      doSearch(v);
    });

    resetBtn.addEventListener('click', () => {
      emailInput.value = '';
      profileCard.style.display = 'none';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
    });

    // Mark Payment -> prompt for amount + ref, update local data & UI
    markPaymentBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record to mark payment for.'); return; }
      const amtRaw = prompt('Enter payment amount (USD):', '');
      if(!amtRaw) return;
      const amt = parseFloat(amtRaw);
      if(isNaN(amt) || amt <= 0) { alert('Invalid amount'); return; }
      const ref = prompt('Enter payment reference:', 'transfer') || 'transfer';
      const date = new Date().toISOString().split('T')[0];
      user.payments.push({date, amount: amt, ref});
      user.amountPaid = (user.amountPaid || 0) + amt;
      user.balance = Math.max(0, (user.subtotal || 0) - user.amountPaid);
      user.paymentRef = ref;
      saveData(db);
      console.log("Marked payment:", {email: user.email, amount: amt, ref});
      renderProfile(user);
      // show success modal briefly
      showModal('Payment Recorded', `Payment of ${dollar(amt)} recorded. New balance ${dollar(user.balance)}.`);
    });

    // Generate Class Private Link
    generateLinkBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No registration found.'); return; }
      if(user.balance > 0){
        // show styled modal asking to clear outstanding
        showModal('Access Restricted', `⚠️ Please clear outstanding of ${dollar(user.balance)} to access the class.`, {showCopy:false});
        console.log("Generate link blocked — balance > 0 for", user.email, user.balance);
      }else{
        const nameSlug = user.name.toLowerCase().replace(/[^a-z0-9]+/g,'').slice(0,30);
        const batchSlug = (user.batch || 'class').toLowerCase().replace(/\s+/g,'');
        const link = `https://nextgencyberclass.com/classroom/${batchSlug}/${nameSlug}`;
        showModal('Access Granted', `✅ Your private link:\n\n${link}`, {showCopy:true, link});
        console.log("Generated class link for", user.email, link);
      }
    });

    // Modal functions
    function showModal(title, body, opts={showCopy:false, link:null}){
      modalTitle.textContent = title;
      modalBody.textContent = body;
      modalBackdrop.style.display = 'flex';
      setTimeout(()=> modal.classList.add('show'), 10);
      modalBackdrop.setAttribute('aria-hidden','false');
      modalCopyLink.style.display = opts.showCopy ? '' : 'none';
      modalCopyLink.dataset.link = opts.link || '';
      modalCopyLink.focus();
    }
    function closeModal(){
      modal.classList.remove('show');
      setTimeout(()=> {
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden','true');
      }, 180);
    }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      if(e.target === modalBackdrop) closeModal();
    });
    modalCopyLink.addEventListener('click', () => {
      const link = modalCopyLink.dataset.link;
      if(!link) return;
      navigator.clipboard.writeText(link).then(() => {
        showModal('Link Copied', 'Private link copied to clipboard.');
        console.log('Copied link to clipboard:', link);
      }).catch(()=> alert('Copy failed'));
    });

    // Copy info to clipboard
    copyBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record found to copy'); return; }
      const payload = {
        name: user.name, email: user.email, phone: user.phone, batch: user.batch,
        amountPaid: user.amountPaid, balance: user.balance, items: user.items
      };
      const text = `NextGen Cyber Institute VIP — Registration\n` + JSON.stringify(payload, null, 2);
      navigator.clipboard.writeText(text).then(()=> {
        showModal('Copied', 'Registration info copied to clipboard.');
        console.log('Copied registration info for', user.email);
      }).catch(()=> alert('Copy to clipboard failed'));
    });

    // Print
    printBtn.addEventListener('click', () => {
      window.print();
      console.log('Print dialog opened');
    });

    // Chat admin (opens WhatsApp to admin number) - update with your admin number if needed
    chatBtn.addEventListener('click', () => {
      // admin phone (example)
      const adminNumber = '+27644746298';
      const url = `https://wa.me/${adminNumber.replace(/\D/g,'')}`;
      window.open(url, '_blank');
      console.log('Opening WhatsApp to admin:', adminNumber);
    });

    // Export CSV
    exportBtn.addEventListener('click', () => {
      const data = db;
      const csvRows = [];
      csvRows.push(['name','email','phone','batch','amountPaid','balance','interest','source'].join(','));
      data.forEach(d => {
        csvRows.push([
          `"${d.name.replace(/"/g,'""')}"`,
          d.email,
          d.phone,
          d.batch,
          d.amountPaid,
          d.balance,
          `"${(d.interest||'').replace(/"/g,'""')}"`,
          d.source
        ].join(','));
      });
      const csv = csvRows.join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ngci_registrations.csv';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      console.log('Exported CSV for', data.length, 'records');
      showModal('Exported', 'CSV exported locally (check downloads).');
    });

    // initial small hint
    console.log("Ready. Preloaded records:", db);

    // If user presses Enter in email input, run search
    emailInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') searchBtn.click();
    });

    // small auto-format on blur
    emailInput.addEventListener('blur', () => {
      emailInput.value = formatEmail(emailInput.value);
    });

  
    // Optional: auto-run search for the prefill (comment/uncomment as desired)
    // doSearch(phoneInput.value);


    // ready message
    console.log("NGCI portal loaded - enter a WhatsApp number and click 'Check Registration'.");

  </script>
</body>
</html>      height:64px;
      border-radius:12px;
      background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      display:flex; align-items:center; justify-content:center;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }
    .brand{
      font-weight:700;
      font-size:20px;
      line-height:1;
    }
    .brand small{display:block; font-weight:600; font-size:12px; color:rgba(255,255,255,0.6); margin-top:4px}

    .vip-badge{
      margin-left:auto;
      padding:6px 12px;
      border-radius:999px;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      color:#081019;
      font-weight:800;
      box-shadow: var(--vip-glow);
      border:1px solid rgba(255,255,255,0.08);
      letter-spacing:0.6px;
      display:flex;
      align-items:center;
      gap:8px;
      font-size:13px;
    }

    /* ===========================
       Lookup form
       =========================== */
    .lookup{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:18px;
      flex-wrap:wrap;
    }
    .lookup input[type="text"]{
      flex:1 1 320px;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.25);
      color:#fff;
      outline:none;
      font-size:15px;
      box-shadow: inset 0 -1px 0 rgba(255,255,255,0.02);
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:700;
      letter-spacing:0.4px;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      color:#fff;
      border:1px solid rgba(255,255,255,0.06);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:active{ transform: translateY(1px) }

    .btn.primary{
      background: linear-gradient(90deg, rgba(212,175,55,0.85), rgba(255,213,74,0.8));
      color:#081019;
      box-shadow: 0 6px 26px rgba(212,175,55,0.12), 0 1px 0 rgba(255,255,255,0.06) inset;
    }
    .btn.ghost{
      background:transparent;
      border:1px dashed rgba(255,255,255,0.06);
    }

    .small{
      font-size:13px;
      color:rgba(255,255,255,0.7);
    }

    /* ===========================
       Result layout
       =========================== */
    .result{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:18px;
      align-items:start;
    }

    .profile, .invoice{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:16px;
      border:1px solid rgba(255,255,255,0.04);
      min-height:180px;
    }

    .profile h3{
      margin:0 0 8px 0;
      font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    .profile .line{height:1px;background:linear-gradient(90deg, rgba(255,255,255,0.03), transparent); margin:10px 0;}

    .field{
      margin-bottom:8px;
      font-size:14px;
      color:rgba(255,255,255,0.92);
    }
    .field .label{font-weight:700; color:rgba(255,255,255,0.75); display:inline-block; width:120px}
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:13px;
      color:#081019;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      box-shadow: var(--vip-glow);
    }
    .status{
      display:inline-flex; gap:10px; align-items:center; margin-top:6px;
    }
    .status .stat{
      padding:6px 10px; border-radius:8px; font-weight:700; font-size:13px;
    }
    .stat.paid{ background: linear-gradient(90deg,#2ec27e,#1bb06f); color:#02120b }
    .stat.partial{ background: linear-gradient(90deg,#ffb74d,#ff8a4d); color:#1a0b00 }
    .stat.unpaid{ background: linear-gradient(90deg,#ff6b6b,#ff4b4b); color:#1a0303 }

    /* invoice */
    .invoice h4{ margin:0 0 12px 0; font-size:16px; }
    .line-item{
      display:flex; justify-content:space-between; gap:8px; padding:6px 0;
      border-bottom: 1px dashed rgba(255,255,255,0.03);
      font-size:14px;
    }
    .line-item:last-child{ border-bottom:none }
    .totals{ font-weight:800; margin-top:10px; display:flex; justify-content:space-between; font-size:15px }
    .balance{ color:#ff6b6b; font-weight:900; }

    /* actions area */
    .actions{ display:flex; flex-direction:column; gap:8px; margin-top:12px }
    .actions .row{ display:flex; gap:8px; flex-wrap:wrap }

    /* typing area */
    .typing{
      min-height:120px;
      font-family: 'Courier New', monospace;
      font-size:15px;
      line-height:1.6;
      color:rgba(255,255,255,0.95);
      white-space:pre-wrap;
      word-break:break-word;
      overflow:hidden;
    }
    .type-gold{ color:var(--gold-1); font-weight:800; text-shadow: 0 0 8px rgba(212,175,55,0.35) }
    .type-white{ color:#fff; }

    /* modal */
    .modal-backdrop{
      position:fixed; inset:0; background: rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:20;
      backdrop-filter: blur(4px);
    }
    .modal{
      width:calc(100% - 48px);
      max-width:520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      transform: translateY(-10px); opacity:0; transition: all .22s ease;
    }
    .modal.show{ transform: translateY(0); opacity:1; }
    .modal h3{ margin:0 0 8px 0 }
    .modal .modal-actions{ display:flex; gap:8px; margin-top:12px; justify-content:flex-end }
    .close-x{ background:transparent; border:none; color:rgba(255,255,255,0.6); font-weight:700; cursor:pointer; }

    /* disabled button look & prevent clicks */
    .btn[disabled]{
      opacity:0.5;
      cursor:not-allowed;
      pointer-events:none;
      filter:grayscale(20%);
    }

    /* responsive */
    @media (max-width:880px){
      .result{ grid-template-columns: 1fr; }
      .invoice{ order:2 }
    }
  </style>
<style type="text/css">.eruda-search-highlight-block{display:inline}.eruda-search-highlight-block .eruda-keyword{background:#332a00;color:#ffcb6b}</style><style type="text/css">@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff')}[class*=' eruda-icon-'],[class^='eruda-icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.eruda-icon-arrow-left:before{content:'\f101'}.eruda-icon-arrow-right:before{content:'\f102'}.eruda-icon-caret-down:before{content:'\f103'}.eruda-icon-caret-right:before{content:'\f104'}.eruda-icon-clear:before{content:'\f105'}.eruda-icon-compress:before{content:'\f106'}.eruda-icon-copy:before{content:'\f107'}.eruda-icon-delete:before{content:'\f108'}.eruda-icon-error:before{content:'\f109'}.eruda-icon-expand:before{content:'\f10a'}.eruda-icon-eye:before{content:'\f10b'}.eruda-icon-filter:before{content:'\f10c'}.eruda-icon-play:before{content:'\f10d'}.eruda-icon-record:before{content:'\f10e'}.eruda-icon-refresh:before{content:'\f10f'}.eruda-icon-reset:before{content:'\f110'}.eruda-icon-search:before{content:'\f111'}.eruda-icon-select:before{content:'\f112'}.eruda-icon-tool:before{content:'\f113'}.eruda-icon-warn:before{content:'\f114'}@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-caret-down:before{content:'\f101'}.luna-console-icon-caret-right:before{content:'\f102'}.luna-console-icon-warn:before{content:'\f103'}.luna-console-icon-error:before{content:'\f104'}.luna-console-icon-input:before{content:'\f105'}.luna-console-icon-output:before{content:'\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#141414}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\f101'}.luna-object-viewer-icon-caret-right:before{content:'\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-caret-down:before{content:'\f101'}.luna-dom-viewer-icon-caret-right:before{content:'\f102'}.luna-dom-viewer{padding:0 0 0 12px;cursor:default;list-style:none;min-width:100%;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-dom-viewer{font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-dom-viewer ul{display:inline-block}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-caret-down,.luna-dom-viewer-icon-caret-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{min-width:200px;line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-caret-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-right{display:none}.luna-dom-viewer-attribute-value{word-break:break-all}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:0;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-light .luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#e8eaed}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:gray}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\f101'}.luna-text-viewer-icon-copy:before{content:'\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}@font-face{font-family:luna-notification-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff')}[class*=' luna-notification-icon-'],[class^=luna-notification-icon-]{display:inline-block;font-family:luna-notification-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-notification-icon-info:before{content:'\f101'}.luna-notification-icon-check:before{content:'\f102'}.luna-notification-icon-warn:before{content:'\f103'}.luna-notification-icon-error:before{content:'\f104'}.luna-notification{position:relative;padding:20px;pointer-events:none;display:flex;flex-direction:column;overflow:hidden;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-notification .luna-notification-hidden,.luna-notification.luna-notification-hidden{display:none}.luna-notification .luna-notification-invisible,.luna-notification.luna-notification-invisible{visibility:hidden}.luna-notification *{box-sizing:border-box}.luna-notification.luna-notification-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-notification.luna-notification-full{position:fixed;top:0;left:0;width:100%;height:100%}.luna-notification-item{display:flex;border:1px solid;padding:10px 16px;align-items:center}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-icon-container{margin-right:8px;color:#fff;border-radius:50%;width:16px;height:16px;text-align:center;line-height:16px}.luna-notification-icon-container.luna-notification-info .luna-notification-icon{position:relative;top:-2px;font-size:12px}.luna-notification-icon-container.luna-notification-success .luna-notification-icon{position:relative;top:-1px;font-size:12px}.luna-notification-icon-container.luna-notification-warning{position:relative;top:-2px}.luna-notification-icon-container.luna-notification-warning .luna-notification-icon{font-size:14px}.luna-notification-icon-container.luna-notification-error{position:relative;top:-1px}.luna-notification-icon-container.luna-notification-error .luna-notification-icon{font-size:14px}.luna-notification-theme-light .luna-notification-item{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-info{background-color:#1677ff;background-color:var(--luna-color-info,#1677ff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-success{background-color:#52c41a;background-color:var(--luna-color-success,#52c41a)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-warning{color:#faad14;color:var(--luna-color-warning,#faad14)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-error{color:#ff4d4f;color:var(--luna-color-error,#ff4d4f)}.luna-notification-theme-dark .luna-notification-item{border-color:#424242;border-color:var(--luna-color-border,#424242);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-info{background-color:#1668dc;background-color:var(--luna-color-info,#1668dc)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-success{background-color:#49aa19;background-color:var(--luna-color-success,#49aa19)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-warning{color:#d89614;color:var(--luna-color-warning,#d89614)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-error{color:#dc4446;color:var(--luna-color-error,#dc4446)}</style></head>
<body>
  <div class="wave-bg" aria-hidden="true">
    <div class="wave"></div>
    <div class="wave wave2"></div>
  </div>

  <div class="watermark">NEXTGEN CYBER INSTITUTE</div>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <header class="card-header">
        <div class="countdown-timer" style="text-align: center; margin-bottom: 20px; color: var(--gold-1); font-weight: bold;">
          <div id="countdyown" style="font-size: 24px; text-shadow: 0 0 10px rgba(212,175,55,0.5);">00h 00m 00s</div>
          <div style="font-size: 14px; margin-top: 5px;">Class Starts Today at 9:00 PM</div>
        </div>
        

        <div class="brand" id="title">
          NextGen Cyber Institute
          <small>VIP Student Verification</small>
        </div>

        <div class="vip-badge" title="VIP">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2l2.1 4.5L19 7l-3.5 3 0.8 4.6L12 11.7 7.7 14.6 8.5 10 5 7l4.9-.5L12 2z" fill="#081019"></path></svg>
          VIP
        </div>
      </header>

      <!-- lookup -->
      <section aria-label="lookup" class="lookup" role="search">
        <input id="emailInput" type="email" placeholder="Enter your email address " aria-label="Email address">
        <button id="searchBtn" class="btn primary">Check Registration</button>
        <button id="resetBtn" class="btn ghost" title="Reset view">Reset</button>
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center">
          <div class="small"></div>
        </div>
      </section>

      <!-- results & typing area -->
      <div id="resultWrap" class="result" aria-live="polite">
        <div class="profile" id="profileCard" style="display:none">
          <h3><span id="vipTitle" class="type-gold"></span></h3>
          <div class="typing" id="typingArea" aria-atomic="true" aria-live="polite"></div>

          <div class="line"></div>
        </div>

        <aside class="invoice" id="invoiceCard" style="display:none">
          <h4>Invoice &amp; Payment</h4>
          <div id="itemsList" aria-hidden="true"></div>
            <div class="totals">
              <div class="balance">Outstanding</div>
              <div id="balanceVal" class="balance">$80</div>
            </div>

          <div style="margin-top:12px;">
            <div class="small" hidden="">Payment Ref: <span id="paymentRef">-</span></div>
            <div cl="" ass="small" hidden=""> Batch: <strong id="batchVal">-</strong></div>
            <div style="height:8px"></div>
            <div id="paymentHistoryArea" class="small"></div>
          </div>
        </aside>
        <!-- moved status and actions to the bottom of the card (last page) -->
      </div>

      <div id="footerControls" style="margin-top:18px;">
        <div class="status" id="statusRow" style="display:none">
          <div id="paidStatus" class="stat paid">PAID</div>
          <div id="partialStatus" class="stat partial" style="display:none">PARTIAL</div>
          <div id="unpaidStatus" class="stat unpaid" style="display:none">UNPAID</div>
        </div>

        <div class="actions" id="actionButtons" style="display:none; margin-top:12px;">
          <div class="row">
            <button id="markPaymentBtn" class="btn" disabled="" hidden="">Mark Payment</button>
            <button id="generateLinkBtn" class="btn primary">Generate Class Private Link</button>
            <button id="copyBtn" class="btn">Copy Info</button>
            <button id="printBtn" class="btn">Print Receipt</button>
            <button id="chatBtn" class="btn">Chat Admin</button>
          </div>
          <div class="row" style="margin-top:6px;">
            <button id="exportBtn" class="btn ghost">Export CSV</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  

  <!-- modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal" class="modal" role="document">
      <h3 id="modalTitle"></h3>
      <div id="modalBody" style="color:rgba(255,255,255,0.9); margin-top:8px; font-size:15px"></div>
      <div class="modal-actions">
        <button id="modalClose" class="close-x btn">Close</button>
        <button id="modalCopyLink" class="btn primary" style="display:none">Copy Link</button>
      </div>
    </div>
  </div>

  <script>
    /*******************************
     * NextGen Cyber Institute - Single HTML App
     * All logic here. No server, no DB. localStorage persists.
     *******************************/

    console.log("NGCI VIP verification script starting...");

    // Utilities
    const $ = id => document.getElementById(id);
    const formatEmail = (raw) => {
      if(!raw) return '';
      return raw.trim().toLowerCase();
    };

    // localStorage key
    const LS_KEY = 'ngci_registrations_v1';

    // Preloaded dataset with Sanni
    const PRELOAD = [
      {
        phone: "+2347061934493",
        name: "Sanni Ayorinde Isaac",
        email: "sanniisaac3@gmail.com",
        country: "Nigeria",
        gender: "Male",
        laptop: "Yes",
        os: "Windows",
        interest: "Ethical Hacking",
        batch: "NGCVIP202511GH76",
        source: "tiktok",
        paymentRef: "NGCVIP/2025/714",
        items: [
          { description: "Installation of Kali Linux", price: 45, status: "successful", note: "8:30 pm Sat 20/09" },
          { description: "Installation of Parrot OS", price: 0, status: "successful", note: "9:05 pm Sun 28/09" },
          { description: "VPN Installation", price: 40, status: "successful", note: "10:20 pm Tue 30/09" },
          { description: "VIP Ethical Hacking Class", price: 200, status: "partial", note: "4:27 pm Tue 23/09" },
          { description: "Network Adapter", price: 100, status: "pending", note: "Pending payment" }
        ],
        subtotal: 385,
        payments: [
          { date: "2025-10-15", amount: 255, ref: "VIPCLASS-AX9021" }
        ],
        amountPaid: 255,
        balance: 80,
        batchId: "NGCVIP2025GH76",
        vip: true
      }
    ];

    // load dataset - localStorage disabled for privacy; always use in-memory PRELOAD copy
    function loadData(){
      console.log("LocalStorage usage disabled. Using in-memory PRELOAD dataset.");
      // return a deep copy so runtime edits don't mutate the original constant
      return JSON.parse(JSON.stringify(PRELOAD));
    }

    // saveData is a no-op when persistence is disabled
    function saveData(arr){
      console.log("saveData called but persistence is disabled. Changes will not be saved permanently.", arr);
    }

    let db = loadData();

    // DOM refs
    const emailInput = $('emailInput');
    const searchBtn = $('searchBtn');
    const resetBtn = $('resetBtn');
    const profileCard = $('profileCard');
    const invoiceCard = $('invoiceCard');
    const typingArea = $('typingArea');
    const vipTitle = $('vipTitle');
    const actionButtons = $('actionButtons');
    const itemsList = $('itemsList');
    const subtotalVal = $('subtotalVal');
    const paidVal = $('paidVal');
    const balanceVal = $('balanceVal');
    const paymentRef = $('paymentRef');
    const batchVal = $('batchVal');
    const paymentHistoryArea = $('paymentHistoryArea');
    const statusRow = $('statusRow');
    const paidStatus = $('paidStatus');
    const partialStatus = $('partialStatus');
    const unpaidStatus = $('unpaidStatus');

    const markPaymentBtn = $('markPaymentBtn');
    const generateLinkBtn = $('generateLinkBtn');
    const copyBtn = $('copyBtn');
    const printBtn = $('printBtn');
    const chatBtn = $('chatBtn');
    const exportBtn = $('exportBtn');

    // modal refs
    const modalBackdrop = $('modalBackdrop');
    const modal = $('modal');
    const modalTitle = $('modalTitle');
    const modalBody = $('modalBody');
    const modalClose = $('modalClose');
    const modalCopyLink = $('modalCopyLink');

    // typing config
    const TYPING_SPEED = 18; // ms per char
    const BETWEEN_LINES = 220; // ms between lines

    // small debounce to avoid double lookups
    let debounceTimer = null;

    function simulateLookup(email){
      return new Promise((resolve) => {
        console.log("Simulated lookup started for:", email);
        // show spinner by changing button state
        searchBtn.disabled = true;
        searchBtn.textContent = 'Searching...';
        setTimeout(() => {
          const found = db.find(r => r.email.toLowerCase() === email.toLowerCase());
          searchBtn.disabled = false;
          searchBtn.textContent = 'Check Registration';
          console.log("Lookup result for", email, "->", found ? "FOUND" : "NOT FOUND", found || "");
          resolve(found || null);
        }, 2000); // 2s simulated delay
      });
    }

    // --- Typing line-by-line effect ---
    function typeLines(lines, callback){
      typingArea.innerHTML = '';
      let i = 0;
      (function nextLine(){
        if(i >= lines.length){
          if(callback) callback();
          return;
        }
        const {text, cls} = lines[i];
        const lineEl = document.createElement('div');
        lineEl.className = cls === 'gold' ? 'type-gold' : 'type-white';
        typingArea.appendChild(lineEl);
        let j = 0;
        function step(){
          if(j <= text.length){
            lineEl.textContent = text.slice(0,j);
            j++;
            setTimeout(step, TYPING_SPEED);
          }else{
            i++;
            setTimeout(nextLine, BETWEEN_LINES);
          }
        }
        step();
      })();
    }

    // Format dollars
    const dollar = (n) => '$' + Number(n).toLocaleString(undefined, {maximumFractionDigits:2});

    // render user found
    function renderProfile(user){
      vipTitle.textContent = user.vip ? 'NextGenCyber Institute VIP' : 'NextGen Cyber Institute';
      profileCard.style.display = '';
      invoiceCard.style.display = '';
      actionButtons.style.display = '';
      statusRow.style.display = '';

      // status badges
      paidStatus.style.display = 'none';
      partialStatus.style.display = 'none';
      unpaidStatus.style.display = 'none';
      if(user.balance <= 0){
        paidStatus.style.display = '';
      }else if(user.amountPaid > 0){
        partialStatus.style.display = '';
      }else{
        unpaidStatus.style.display = '';
      }

      // typed lines: VIP title gold then details in white lines with spacing
      const lines = [];
      
      // Personal Information
      lines.push({ text: `──── Personal Information ────`, cls: 'gold' });
      lines.push({ text: `Full Name: ${user.name}`, cls: 'white' });
      lines.push({ text: `Email: ${user.email}`, cls: 'white' });
      lines.push({ text: `WhatsApp: ${user.phone}`, cls: 'white' });
      lines.push({ text: `Gender: ${user.gender}`, cls: 'white' });
      
      // Location
      lines.push({ text: `\n──── Location ────`, cls: 'gold' });
      lines.push({ text: `Country: ${user.country}`, cls: 'white' });
      
      // Technical Setup
      lines.push({ text: `\n──── Technical Setup ────`, cls: 'gold' });
      lines.push({ text: `Laptop Available: ${user.laptop}`, cls: 'white' });
      lines.push({ text: `Operating System: ${user.os}`, cls: 'white' });
      
      // Course Details
      lines.push({ text: `\n──── Course Details ────`, cls: 'gold' });
      lines.push({ text: `Interest Area: ${user.interest}`, cls: 'white' });
      lines.push({ text: `Batch: ${user.batch}`, cls: 'white' });
      lines.push({ text: `Source: ${user.source}`, cls: 'white' });
      lines.push({ text: `Payment Reference: ${user.paymentRef}`, cls: 'white' });

      typeLines(lines, () => {
        console.log("Typing animation complete for", user.phone);
      });

      // invoice
      itemsList.innerHTML = '';
      user.items.forEach(it => {
        const div = document.createElement('div');
        div.className = 'line-item';
        const priceText = it.price === 0 ? 'Free' : `<span style="color: #2ec27e; font-weight: bold;">${dollar(it.price)}</span>`;
        let statusColor, statusText, statusSymbol;
        if (it.status === 'pending') {
          statusColor = '#ff6b6b';
          statusText = ' (Pending)';
          statusSymbol = '⏳';
        } else if (it.status === 'partial') {
          statusColor = 'linear-gradient(90deg,#ffb74d,#ff8a4d)';
          statusText = ' (Partial)';
          statusSymbol = '◔';
        } else { // successful
          statusColor = 'linear-gradient(90deg,#2ec27e,#1bb06f)';
          statusText = ' (Successful)';
          statusSymbol = '✓';
        }
        const statusStyle = `background: ${statusColor}; font-weight: bold; margin-left:8px; padding: 2px 8px; border-radius: 4px; color: ${it.status === 'pending' ? '#fff' : '#000'};`;

        const leftHtml = `<div>${it.description}<span style="${statusStyle}">${statusSymbol}${statusText}</span>` + (it.note ? `<div class="small" style="margin-top:6px;color:rgba(255,255,255,0.75)">${it.note}</div>` : '') + `</div>`;
        div.innerHTML = `${leftHtml}<div>${priceText}</div>`;
        itemsList.appendChild(div);
      });

      subtotalVal.textContent = dollar(user.subtotal);
      paidVal.textContent = dollar(user.amountPaid);
      balanceVal.textContent = dollar(user.balance);
      paymentRef.textContent = user.paymentRef || '-';
      batchVal.textContent = user.batch || '-';

      // history
      if(user.payments && user.payments.length){
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong><br>';
        user.payments.slice().reverse().forEach(p => {
          paymentHistoryArea.innerHTML += `${p.date} — ${dollar(p.amount)} (ref: ${p.ref})<br>`;
        });
      }else{
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong> None';
      }

      // show/hide action buttons based on status (we show all)
      actionButtons.style.display = 'block';
    }

    // render not found
    function renderNotFound(email){
      profileCard.style.display = '';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
      statusRow.style.display = 'none';
      vipTitle.textContent = '';
      typingArea.innerHTML = '';
      typeLines([{text: 'Record Not Found', cls:'white'}, {text: `No registration matches ${email}`, cls:'white'}], () => {});
      console.log("Displayed not found for", email);
    }

    // main search
    async function doSearch(rawEmail){
      const email = formatEmail(rawEmail);
      if(!email){
        alert('Please enter an email address.');
        return;
      }
      const found = await simulateLookup(email);
      if(found){
        renderProfile(found);
      }else{
        renderNotFound(email);
      }
    }

    // event listeners
    searchBtn.addEventListener('click', () => {
      const v = emailInput.value;
      doSearch(v);
    });

    resetBtn.addEventListener('click', () => {
      emailInput.value = '';
      profileCard.style.display = 'none';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
    });

    // Mark Payment -> prompt for amount + ref, update local data & UI
    markPaymentBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record to mark payment for.'); return; }
      const amtRaw = prompt('Enter payment amount (USD):', '');
      if(!amtRaw) return;
      const amt = parseFloat(amtRaw);
      if(isNaN(amt) || amt <= 0) { alert('Invalid amount'); return; }
      const ref = prompt('Enter payment reference:', 'transfer') || 'transfer';
      const date = new Date().toISOString().split('T')[0];
      user.payments.push({date, amount: amt, ref});
      user.amountPaid = (user.amountPaid || 0) + amt;
      user.balance = Math.max(0, (user.subtotal || 0) - user.amountPaid);
      user.paymentRef = ref;
      saveData(db);
      console.log("Marked payment:", {email: user.email, amount: amt, ref});
      renderProfile(user);
      // show success modal briefly
      showModal('Payment Recorded', `Payment of ${dollar(amt)} recorded. New balance ${dollar(user.balance)}.`);
    });

    // Generate Class Private Link
    generateLinkBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No registration found.'); return; }
      if(user.balance > 0){
        // show styled modal asking to clear outstanding
        showModal('Access Restricted', `⚠️ Please clear outstanding of ${dollar(user.balance)} to access the class.`, {showCopy:false});
        console.log("Generate link blocked — balance > 0 for", user.email, user.balance);
      }else{
        const nameSlug = user.name.toLowerCase().replace(/[^a-z0-9]+/g,'').slice(0,30);
        const batchSlug = (user.batch || 'class').toLowerCase().replace(/\s+/g,'');
        const link = `https://nextgencyberclass.com/classroom/${batchSlug}/${nameSlug}`;
        showModal('Access Granted', `✅ Your private link:\n\n${link}`, {showCopy:true, link});
        console.log("Generated class link for", user.email, link);
      }
    });

    // Modal functions
    function showModal(title, body, opts={showCopy:false, link:null}){
      modalTitle.textContent = title;
      modalBody.textContent = body;
      modalBackdrop.style.display = 'flex';
      setTimeout(()=> modal.classList.add('show'), 10);
      modalBackdrop.setAttribute('aria-hidden','false');
      modalCopyLink.style.display = opts.showCopy ? '' : 'none';
      modalCopyLink.dataset.link = opts.link || '';
      modalCopyLink.focus();
    }
    function closeModal(){
      modal.classList.remove('show');
      setTimeout(()=> {
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden','true');
      }, 180);
    }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      if(e.target === modalBackdrop) closeModal();
    });
    modalCopyLink.addEventListener('click', () => {
      const link = modalCopyLink.dataset.link;
      if(!link) return;
      navigator.clipboard.writeText(link).then(() => {
        showModal('Link Copied', 'Private link copied to clipboard.');
        console.log('Copied link to clipboard:', link);
      }).catch(()=> alert('Copy failed'));
    });

    // Copy info to clipboard
    copyBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record found to copy'); return; }
      const payload = {
        name: user.name, email: user.email, phone: user.phone, batch: user.batch,
        amountPaid: user.amountPaid, balance: user.balance, items: user.items
      };
      const text = `NextGen Cyber Institute VIP — Registration\n` + JSON.stringify(payload, null, 2);
      navigator.clipboard.writeText(text).then(()=> {
        showModal('Copied', 'Registration info copied to clipboard.');
        console.log('Copied registration info for', user.email);
      }).catch(()=> alert('Copy to clipboard failed'));
    });

    // Print
    printBtn.addEventListener('click', () => {
      window.print();
      console.log('Print dialog opened');
    });

    // Chat admin (opens WhatsApp to admin number) - update with your admin number if needed
    chatBtn.addEventListener('click', () => {
      // admin phone (example)
      const adminNumber = '+27644746298';
      const url = `https://wa.me/${adminNumber.replace(/\D/g,'')}`;
      window.open(url, '_blank');
      console.log('Opening WhatsApp to admin:', adminNumber);
    });

    // Export CSV
    exportBtn.addEventListener('click', () => {
      const data = db;
      const csvRows = [];
      csvRows.push(['name','email','phone','batch','amountPaid','balance','interest','source'].join(','));
      data.forEach(d => {
        csvRows.push([
          `"${d.name.replace(/"/g,'""')}"`,
          d.email,
          d.phone,
          d.batch,
          d.amountPaid,
          d.balance,
          `"${(d.interest||'').replace(/"/g,'""')}"`,
          d.source
        ].join(','));
      });
      const csv = csvRows.join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ngci_registrations.csv';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      console.log('Exported CSV for', data.length, 'records');
      showModal('Exported', 'CSV exported locally (check downloads).');
    });

    // initial small hint
    console.log("Ready. Preloaded records:", db);

    // If user presses Enter in email input, run search
    emailInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') searchBtn.click();
    });

    // small auto-format on blur
    emailInput.addEventListener('blur', () => {
      emailInput.value = formatEmail(emailInput.value);
    });

  
    // Optional: auto-run search for the prefill (comment/uncomment as desired)
    // doSearch(phoneInput.value);

    // Countdown Timer
    function updateCountdown() {
      const now = new Date();
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(0, 0, 0, 0); // Set to 9:00 PM tomorrow
      
      const diff = tomorrow - now;
      
      const hours = Math.floor(diff / (0 * 00 * 0));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      const countdownEl = document.getElementById('countdown');
      countdownEl.innerHTML = `${hours}h ${minutes}m ${seconds}s`;
    }

    // Update countdown every second
    setInterval(updateCountdown, 1000);
    updateCountdown(); // Initial call

    // ready message
    console.log("NGCI portal loaded - enter a WhatsApp number and click 'Check Registration'.");

  </script>


<script src="https://cdn.jsdelivr.net/npm/eruda"></script></body><div id="eruda" style="all: initial;"></div><div class="__chobitsu-hide__" style="all: initial;"></div></html>    .logo{
      width:64px;
      height:64px;
      border-radius:12px;
      background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      display:flex; align-items:center; justify-content:center;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }
    .brand{
      font-weight:700;
      font-size:20px;
      line-height:1;
    }
    .brand small{display:block; font-weight:600; font-size:12px; color:rgba(255,255,255,0.6); margin-top:4px}

    .vip-badge{
      margin-left:auto;
      padding:6px 12px;
      border-radius:999px;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      color:#081019;
      font-weight:800;
      box-shadow: var(--vip-glow);
      border:1px solid rgba(255,255,255,0.08);
      letter-spacing:0.6px;
      display:flex;
      align-items:center;
      gap:8px;
      font-size:13px;
    }

    /* ===========================
       Lookup form
       =========================== */
    .lookup{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:18px;
      flex-wrap:wrap;
    }
    .lookup input[type="text"]{
      flex:1 1 320px;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(0,0,0,0.25);
      color:#fff;
      outline:none;
      font-size:15px;
      box-shadow: inset 0 -1px 0 rgba(255,255,255,0.02);
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:700;
      letter-spacing:0.4px;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      color:#fff;
      border:1px solid rgba(255,255,255,0.06);
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:active{ transform: translateY(1px) }

    .btn.primary{
      background: linear-gradient(90deg, rgba(212,175,55,0.85), rgba(255,213,74,0.8));
      color:#081019;
      box-shadow: 0 6px 26px rgba(212,175,55,0.12), 0 1px 0 rgba(255,255,255,0.06) inset;
    }
    .btn.ghost{
      background:transparent;
      border:1px dashed rgba(255,255,255,0.06);
    }

    .small{
      font-size:13px;
      color:rgba(255,255,255,0.7);
    }

    /* ===========================
       Result layout
       =========================== */
    .result{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:18px;
      align-items:start;
    }

    .profile, .invoice{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:16px;
      border:1px solid rgba(255,255,255,0.04);
      min-height:180px;
    }

    .profile h3{
      margin:0 0 8px 0;
      font-size:18px;
      display:flex; align-items:center; gap:10px;
    }
    .profile .line{height:1px;background:linear-gradient(90deg, rgba(255,255,255,0.03), transparent); margin:10px 0;}

    .field{
      margin-bottom:8px;
      font-size:14px;
      color:rgba(255,255,255,0.92);
    }
    .field .label{font-weight:700; color:rgba(255,255,255,0.75); display:inline-block; width:120px}
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:13px;
      color:#081019;
      background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
      box-shadow: var(--vip-glow);
    }
    .status{
      display:inline-flex; gap:10px; align-items:center; margin-top:6px;
    }
    .status .stat{
      padding:6px 10px; border-radius:8px; font-weight:700; font-size:13px;
    }
    .stat.paid{ background: linear-gradient(90deg,#2ec27e,#1bb06f); color:#02120b }
    .stat.partial{ background: linear-gradient(90deg,#ffb74d,#ff8a4d); color:#1a0b00 }
    .stat.unpaid{ background: linear-gradient(90deg,#ff6b6b,#ff4b4b); color:#1a0303 }

    /* invoice */
    .invoice h4{ margin:0 0 12px 0; font-size:16px; }
    .line-item{
      display:flex; justify-content:space-between; gap:8px; padding:6px 0;
      border-bottom: 1px dashed rgba(255,255,255,0.03);
      font-size:14px;
    }
    .line-item:last-child{ border-bottom:none }
    .totals{ font-weight:800; margin-top:10px; display:flex; justify-content:space-between; font-size:15px }
    .balance{ color:#ff6b6b; font-weight:900; }

    /* actions area */
    .actions{ display:flex; flex-direction:column; gap:8px; margin-top:12px }
    .actions .row{ display:flex; gap:8px; flex-wrap:wrap }

    /* typing area */
    .typing{
      min-height:120px;
      font-family: 'Courier New', monospace;
      font-size:15px;
      line-height:1.6;
      color:rgba(255,255,255,0.95);
      white-space:pre-wrap;
      word-break:break-word;
      overflow:hidden;
    }
    .type-gold{ color:var(--gold-1); font-weight:800; text-shadow: 0 0 8px rgba(212,175,55,0.35) }
    .type-white{ color:#fff; }

    /* modal */
    .modal-backdrop{
      position:fixed; inset:0; background: rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:20;
      backdrop-filter: blur(4px);
    }
    .modal{
      width:calc(100% - 48px);
      max-width:520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.06);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      transform: translateY(-10px); opacity:0; transition: all .22s ease;
    }
    .modal.show{ transform: translateY(0); opacity:1; }
    .modal h3{ margin:0 0 8px 0 }
    .modal .modal-actions{ display:flex; gap:8px; margin-top:12px; justify-content:flex-end }
    .close-x{ background:transparent; border:none; color:rgba(255,255,255,0.6); font-weight:700; cursor:pointer; }

    /* disabled button look & prevent clicks */
    .btn[disabled]{
      opacity:0.5;
      cursor:not-allowed;
      pointer-events:none;
      filter:grayscale(20%);
    }

    /* responsive */
    @media (max-width:880px){
      .result{ grid-template-columns: 1fr; }
      .invoice{ order:2 }
    }
  </style>
</head>
<body>
  <div class="wave-bg" aria-hidden="true">
    <div class="wave"></div>
    <div class="wave wave2"></div>
  </div>

  <div class="watermark">NEXTGEN CYBER INSTITUTE</div>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <header class="card-header">
        <div class="countdown-timer" style="text-align: center; margin-bottom: 20px; color: var(--gold-1); font-weight: bold;">
          <div id="countdown" style="font-size: 24px; text-shadow: 0 0 10px rgba(212,175,55,0.5);"></div>
          <div style="font-size: 14px; margin-top: 5px;">Class Starts Tomorrow at 9:00 PM</div>
        </div>
        

        <div class="brand" id="title">
          NextGen Cyber Institute
          <small>VIP Student Verification</small>
        </div>

        <div class="vip-badge" title="VIP">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2l2.1 4.5L19 7l-3.5 3 0.8 4.6L12 11.7 7.7 14.6 8.5 10 5 7l4.9-.5L12 2z" fill="#081019"></path></svg>
          VIP
        </div>
      </header>

      <!-- lookup -->
      <section aria-label="lookup" class="lookup" role="search">
        <input id="emailInput" type="email" placeholder="Enter your email address " aria-label="Email address">
        <button id="searchBtn" class="btn primary">Check Registration</button>
        <button id="resetBtn" class="btn ghost" title="Reset view">Reset</button>
        <div style="margin-left:auto; display:flex; gap:8px; align-items:center">
          <div class="small"></div>
        </div>
      </section>

      <!-- results & typing area -->
      <div id="resultWrap" class="result" aria-live="polite">
        <div class="profile" id="profileCard" style="display:none">
          <h3><span id="vipTitle" class="type-gold"></span></h3>
          <div class="typing" id="typingArea" aria-atomic="true" aria-live="polite"></div>

          <div class="line"></div>
        </div>

        <aside class="invoice" id="invoiceCard" style="display:none">
          <h4>Invoice & Payment</h4>
          <div id="itemsList" aria-hidden="true"></div>
            <div class="totals">
              <div class="balance">Outstanding</div>
              <div id="balanceVal" class="balance">$80</div>
            </div>

          <div style="margin-top:12px;">
            <div class="small" hidden>Payment Ref: <span id="paymentRef">-</span></div>
            <div cl
            ass="small" hidden> Batch: <strong id="batchVal">-</strong></div>
            <div style="height:8px"></div>
            <div id="paymentHistoryArea" class="small"></div>
          </div>
        </aside>
        <!-- moved status and actions to the bottom of the card (last page) -->
      </div>

      <div id="footerControls" style="margin-top:18px;">
        <div class="status" id="statusRow" style="display:none">
          <div id="paidStatus" class="stat paid">PAID</div>
          <div id="partialStatus" class="stat partial" style="display:none">PARTIAL</div>
          <div id="unpaidStatus" class="stat unpaid" style="display:none">UNPAID</div>
        </div>

        <div class="actions" id="actionButtons" style="display:none; margin-top:12px;">
          <div class="row">
            <button id="markPaymentBtn" class="btn" disabled hidden>Mark Payment</button>
            <button id="generateLinkBtn" class="btn primary">Generate Class Private Link</button>
            <button id="copyBtn" class="btn">Copy Info</button>
            <button id="printBtn" class="btn">Print Receipt</button>
            <button id="chatBtn" class="btn">Chat Admin</button>
          </div>
          <div class="row" style="margin-top:6px;">
            <button id="exportBtn" class="btn ghost">Export CSV</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>

  <!-- modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div id="modal" class="modal" role="document">
      <h3 id="modalTitle"></h3>
      <div id="modalBody" style="color:rgba(255,255,255,0.9); margin-top:8px; font-size:15px"></div>
      <div class="modal-actions">
        <button id="modalClose" class="close-x btn">Close</button>
        <button id="modalCopyLink" class="btn primary" style="display:none">Copy Link</button>
      </div>
    </div>
  </div>

  <script>
    /*******************************
     * NextGen Cyber Institute - Single HTML App
     * All logic here. No server, no DB. localStorage persists.
     *******************************/

    console.log("NGCI VIP verification script starting...");

    // Utilities
    const $ = id => document.getElementById(id);
    const formatEmail = (raw) => {
      if(!raw) return '';
      return raw.trim().toLowerCase();
    };

    // localStorage key
    const LS_KEY = 'ngci_registrations_v1';

    // Preloaded dataset with Sanni
    const PRELOAD = [
      {
        phone: "+2347061934493",
        name: "Sanni Ayorinde Isaac",
        email: "sanniisaac3@gmail.com",
        country: "Nigeria",
        gender: "Male",
        laptop: "Yes",
        os: "Windows",
        interest: "Ethical Hacking",
        batch: "NGCVIP202511GH76",
        source: "tiktok",
        paymentRef: "NGCVIP/2025/714",
        items: [
          { description: "Installation of Kali Linux", price: 45, status: "successful", note: "8:30 pm Sat 20/09" },
          { description: "Installation of Parrot OS", price: 0, status: "successful", note: "9:05 pm Sun 28/09" },
          { description: "VPN Installation", price: 40, status: "successful", note: "10:20 pm Tue 30/09" },
          { description: "VIP Ethical Hacking Class", price: 200, status: "partial", note: "4:27 pm Tue 23/09" },
          { description: "Network Adapter", price: 100, status: "pending", note: "Pending payment" }
        ],
        subtotal: 385,
        payments: [
          { date: "2025-10-15", amount: 255, ref: "VIPCLASS-AX9021" }
        ],
        amountPaid: 255,
        balance: 80,
        batchId: "NGCVIP2025GH76",
        vip: true
      }
    ];

    // load dataset - localStorage disabled for privacy; always use in-memory PRELOAD copy
    function loadData(){
      console.log("LocalStorage usage disabled. Using in-memory PRELOAD dataset.");
      // return a deep copy so runtime edits don't mutate the original constant
      return JSON.parse(JSON.stringify(PRELOAD));
    }

    // saveData is a no-op when persistence is disabled
    function saveData(arr){
      console.log("saveData called but persistence is disabled. Changes will not be saved permanently.", arr);
    }

    let db = loadData();

    // DOM refs
    const emailInput = $('emailInput');
    const searchBtn = $('searchBtn');
    const resetBtn = $('resetBtn');
    const profileCard = $('profileCard');
    const invoiceCard = $('invoiceCard');
    const typingArea = $('typingArea');
    const vipTitle = $('vipTitle');
    const actionButtons = $('actionButtons');
    const itemsList = $('itemsList');
    const subtotalVal = $('subtotalVal');
    const paidVal = $('paidVal');
    const balanceVal = $('balanceVal');
    const paymentRef = $('paymentRef');
    const batchVal = $('batchVal');
    const paymentHistoryArea = $('paymentHistoryArea');
    const statusRow = $('statusRow');
    const paidStatus = $('paidStatus');
    const partialStatus = $('partialStatus');
    const unpaidStatus = $('unpaidStatus');

    const markPaymentBtn = $('markPaymentBtn');
    const generateLinkBtn = $('generateLinkBtn');
    const copyBtn = $('copyBtn');
    const printBtn = $('printBtn');
    const chatBtn = $('chatBtn');
    const exportBtn = $('exportBtn');

    // modal refs
    const modalBackdrop = $('modalBackdrop');
    const modal = $('modal');
    const modalTitle = $('modalTitle');
    const modalBody = $('modalBody');
    const modalClose = $('modalClose');
    const modalCopyLink = $('modalCopyLink');

    // typing config
    const TYPING_SPEED = 18; // ms per char
    const BETWEEN_LINES = 220; // ms between lines

    // small debounce to avoid double lookups
    let debounceTimer = null;

    function simulateLookup(email){
      return new Promise((resolve) => {
        console.log("Simulated lookup started for:", email);
        // show spinner by changing button state
        searchBtn.disabled = true;
        searchBtn.textContent = 'Searching...';
        setTimeout(() => {
          const found = db.find(r => r.email.toLowerCase() === email.toLowerCase());
          searchBtn.disabled = false;
          searchBtn.textContent = 'Check Registration';
          console.log("Lookup result for", email, "->", found ? "FOUND" : "NOT FOUND", found || "");
          resolve(found || null);
        }, 2000); // 2s simulated delay
      });
    }

    // --- Typing line-by-line effect ---
    function typeLines(lines, callback){
      typingArea.innerHTML = '';
      let i = 0;
      (function nextLine(){
        if(i >= lines.length){
          if(callback) callback();
          return;
        }
        const {text, cls} = lines[i];
        const lineEl = document.createElement('div');
        lineEl.className = cls === 'gold' ? 'type-gold' : 'type-white';
        typingArea.appendChild(lineEl);
        let j = 0;
        function step(){
          if(j <= text.length){
            lineEl.textContent = text.slice(0,j);
            j++;
            setTimeout(step, TYPING_SPEED);
          }else{
            i++;
            setTimeout(nextLine, BETWEEN_LINES);
          }
        }
        step();
      })();
    }

    // Format dollars
    const dollar = (n) => '$' + Number(n).toLocaleString(undefined, {maximumFractionDigits:2});

    // render user found
    function renderProfile(user){
      vipTitle.textContent = user.vip ? 'NextGenCyber Institute VIP' : 'NextGen Cyber Institute';
      profileCard.style.display = '';
      invoiceCard.style.display = '';
      actionButtons.style.display = '';
      statusRow.style.display = '';

      // status badges
      paidStatus.style.display = 'none';
      partialStatus.style.display = 'none';
      unpaidStatus.style.display = 'none';
      if(user.balance <= 0){
        paidStatus.style.display = '';
      }else if(user.amountPaid > 0){
        partialStatus.style.display = '';
      }else{
        unpaidStatus.style.display = '';
      }

      // typed lines: VIP title gold then details in white lines with spacing
      const lines = [];
      
      // Personal Information
      lines.push({ text: `──── Personal Information ────`, cls: 'gold' });
      lines.push({ text: `Full Name: ${user.name}`, cls: 'white' });
      lines.push({ text: `Email: ${user.email}`, cls: 'white' });
      lines.push({ text: `WhatsApp: ${user.phone}`, cls: 'white' });
      lines.push({ text: `Gender: ${user.gender}`, cls: 'white' });
      
      // Location
      lines.push({ text: `\n──── Location ────`, cls: 'gold' });
      lines.push({ text: `Country: ${user.country}`, cls: 'white' });
      
      // Technical Setup
      lines.push({ text: `\n──── Technical Setup ────`, cls: 'gold' });
      lines.push({ text: `Laptop Available: ${user.laptop}`, cls: 'white' });
      lines.push({ text: `Operating System: ${user.os}`, cls: 'white' });
      
      // Course Details
      lines.push({ text: `\n──── Course Details ────`, cls: 'gold' });
      lines.push({ text: `Interest Area: ${user.interest}`, cls: 'white' });
      lines.push({ text: `Batch: ${user.batch}`, cls: 'white' });
      lines.push({ text: `Source: ${user.source}`, cls: 'white' });
      lines.push({ text: `Payment Reference: ${user.paymentRef}`, cls: 'white' });

      typeLines(lines, () => {
        console.log("Typing animation complete for", user.phone);
      });

      // invoice
      itemsList.innerHTML = '';
      user.items.forEach(it => {
        const div = document.createElement('div');
        div.className = 'line-item';
        const priceText = it.price === 0 ? 'Free' : `<span style="color: #2ec27e; font-weight: bold;">${dollar(it.price)}</span>`;
        let statusColor, statusText, statusSymbol;
        if (it.status === 'pending') {
          statusColor = '#ff6b6b';
          statusText = ' (Pending)';
          statusSymbol = '⏳';
        } else if (it.status === 'partial') {
          statusColor = 'linear-gradient(90deg,#ffb74d,#ff8a4d)';
          statusText = ' (Partial)';
          statusSymbol = '◔';
        } else { // successful
          statusColor = 'linear-gradient(90deg,#2ec27e,#1bb06f)';
          statusText = ' (Successful)';
          statusSymbol = '✓';
        }
        const statusStyle = `background: ${statusColor}; font-weight: bold; margin-left:8px; padding: 2px 8px; border-radius: 4px; color: ${it.status === 'pending' ? '#fff' : '#000'};`;

        const leftHtml = `<div>${it.description}<span style="${statusStyle}">${statusSymbol}${statusText}</span>` + (it.note ? `<div class="small" style="margin-top:6px;color:rgba(255,255,255,0.75)">${it.note}</div>` : '') + `</div>`;
        div.innerHTML = `${leftHtml}<div>${priceText}</div>`;
        itemsList.appendChild(div);
      });

      subtotalVal.textContent = dollar(user.subtotal);
      paidVal.textContent = dollar(user.amountPaid);
      balanceVal.textContent = dollar(user.balance);
      paymentRef.textContent = user.paymentRef || '-';
      batchVal.textContent = user.batch || '-';

      // history
      if(user.payments && user.payments.length){
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong><br>';
        user.payments.slice().reverse().forEach(p => {
          paymentHistoryArea.innerHTML += `${p.date} — ${dollar(p.amount)} (ref: ${p.ref})<br>`;
        });
      }else{
        paymentHistoryArea.innerHTML = '<strong>Payment History:</strong> None';
      }

      // show/hide action buttons based on status (we show all)
      actionButtons.style.display = 'block';
    }

    // render not found
    function renderNotFound(email){
      profileCard.style.display = '';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
      statusRow.style.display = 'none';
      vipTitle.textContent = '';
      typingArea.innerHTML = '';
      typeLines([{text: 'Record Not Found', cls:'white'}, {text: `No registration matches ${email}`, cls:'white'}], () => {});
      console.log("Displayed not found for", email);
    }

    // main search
    async function doSearch(rawEmail){
      const email = formatEmail(rawEmail);
      if(!email){
        alert('Please enter an email address.');
        return;
      }
      const found = await simulateLookup(email);
      if(found){
        renderProfile(found);
      }else{
        renderNotFound(email);
      }
    }

    // event listeners
    searchBtn.addEventListener('click', () => {
      const v = emailInput.value;
      doSearch(v);
    });

    resetBtn.addEventListener('click', () => {
      emailInput.value = '';
      profileCard.style.display = 'none';
      invoiceCard.style.display = 'none';
      actionButtons.style.display = 'none';
    });

    // Mark Payment -> prompt for amount + ref, update local data & UI
    markPaymentBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record to mark payment for.'); return; }
      const amtRaw = prompt('Enter payment amount (USD):', '');
      if(!amtRaw) return;
      const amt = parseFloat(amtRaw);
      if(isNaN(amt) || amt <= 0) { alert('Invalid amount'); return; }
      const ref = prompt('Enter payment reference:', 'transfer') || 'transfer';
      const date = new Date().toISOString().split('T')[0];
      user.payments.push({date, amount: amt, ref});
      user.amountPaid = (user.amountPaid || 0) + amt;
      user.balance = Math.max(0, (user.subtotal || 0) - user.amountPaid);
      user.paymentRef = ref;
      saveData(db);
      console.log("Marked payment:", {email: user.email, amount: amt, ref});
      renderProfile(user);
      // show success modal briefly
      showModal('Payment Recorded', `Payment of ${dollar(amt)} recorded. New balance ${dollar(user.balance)}.`);
    });

    // Generate Class Private Link
    generateLinkBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      if(!email) { alert('Enter email first.'); return; }
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No registration found.'); return; }
      if(user.balance > 0){
        // show styled modal asking to clear outstanding
        showModal('Access Restricted', `⚠️ Please clear outstanding of ${dollar(user.balance)} to access the class.`, {showCopy:false});
        console.log("Generate link blocked — balance > 0 for", user.email, user.balance);
      }else{
        const nameSlug = user.name.toLowerCase().replace(/[^a-z0-9]+/g,'').slice(0,30);
        const batchSlug = (user.batch || 'class').toLowerCase().replace(/\s+/g,'');
        const link = `https://nextgencyberclass.com/classroom/${batchSlug}/${nameSlug}`;
        showModal('Access Granted', `✅ Your private link:\n\n${link}`, {showCopy:true, link});
        console.log("Generated class link for", user.email, link);
      }
    });

    // Modal functions
    function showModal(title, body, opts={showCopy:false, link:null}){
      modalTitle.textContent = title;
      modalBody.textContent = body;
      modalBackdrop.style.display = 'flex';
      setTimeout(()=> modal.classList.add('show'), 10);
      modalBackdrop.setAttribute('aria-hidden','false');
      modalCopyLink.style.display = opts.showCopy ? '' : 'none';
      modalCopyLink.dataset.link = opts.link || '';
      modalCopyLink.focus();
    }
    function closeModal(){
      modal.classList.remove('show');
      setTimeout(()=> {
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden','true');
      }, 180);
    }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e) => {
      if(e.target === modalBackdrop) closeModal();
    });
    modalCopyLink.addEventListener('click', () => {
      const link = modalCopyLink.dataset.link;
      if(!link) return;
      navigator.clipboard.writeText(link).then(() => {
        showModal('Link Copied', 'Private link copied to clipboard.');
        console.log('Copied link to clipboard:', link);
      }).catch(()=> alert('Copy failed'));
    });

    // Copy info to clipboard
    copyBtn.addEventListener('click', () => {
      const email = formatEmail(emailInput.value);
      const user = db.find(r => r.email.toLowerCase() === email.toLowerCase());
      if(!user){ alert('No record found to copy'); return; }
      const payload = {
        name: user.name, email: user.email, phone: user.phone, batch: user.batch,
        amountPaid: user.amountPaid, balance: user.balance, items: user.items
      };
      const text = `NextGen Cyber Institute VIP — Registration\n` + JSON.stringify(payload, null, 2);
      navigator.clipboard.writeText(text).then(()=> {
        showModal('Copied', 'Registration info copied to clipboard.');
        console.log('Copied registration info for', user.email);
      }).catch(()=> alert('Copy to clipboard failed'));
    });

    // Print
    printBtn.addEventListener('click', () => {
      window.print();
      console.log('Print dialog opened');
    });

    // Chat admin (opens WhatsApp to admin number) - update with your admin number if needed
    chatBtn.addEventListener('click', () => {
      // admin phone (example)
      const adminNumber = '+27644746298';
      const url = `https://wa.me/${adminNumber.replace(/\D/g,'')}`;
      window.open(url, '_blank');
      console.log('Opening WhatsApp to admin:', adminNumber);
    });

    // Export CSV
    exportBtn.addEventListener('click', () => {
      const data = db;
      const csvRows = [];
      csvRows.push(['name','email','phone','batch','amountPaid','balance','interest','source'].join(','));
      data.forEach(d => {
        csvRows.push([
          `"${d.name.replace(/"/g,'""')}"`,
          d.email,
          d.phone,
          d.batch,
          d.amountPaid,
          d.balance,
          `"${(d.interest||'').replace(/"/g,'""')}"`,
          d.source
        ].join(','));
      });
      const csv = csvRows.join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ngci_registrations.csv';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      console.log('Exported CSV for', data.length, 'records');
      showModal('Exported', 'CSV exported locally (check downloads).');
    });

    // initial small hint
    console.log("Ready. Preloaded records:", db);

    // If user presses Enter in email input, run search
    emailInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') searchBtn.click();
    });

    // small auto-format on blur
    emailInput.addEventListener('blur', () => {
      emailInput.value = formatEmail(emailInput.value);
    });

  
    // Optional: auto-run search for the prefill (comment/uncomment as desired)
    // doSearch(phoneInput.value);

    // Countdown Timer
    function updateCountdown() {
      const now = new Date();
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(21, 0, 0, 0); // Set to 9:00 PM tomorrow
      
      const diff = tomorrow - now;
      
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      const countdownEl = document.getElementById('countdown');
      countdownEl.innerHTML = `${hours}h ${minutes}m ${seconds}s`;
    }

    // Update countdown every second
    setInterval(updateCountdown, 1000);
    updateCountdown(); // Initial call

    // ready message
    console.log("NGCI portal loaded - enter a WhatsApp number and click 'Check Registration'.");

  </script>
</body>
</html>
